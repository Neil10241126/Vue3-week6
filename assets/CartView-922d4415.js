import{_ as p,o as d,c as i,a as t,F as _,f as g,t as n,e as C,g as b}from"./index-7b0006d9.js";const{VITE_URL:l,VITE_PATH:o}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"neil-api-test1",BASE_URL:"/Vue3-week6/",MODE:"production",DEV:!1,PROD:!0},m={data(){return{cart:{}}},methods:{getCartList(){this.$http.get(`${l}/v2/api/${o}/cart`).then(s=>{this.cart=s.data.data,console.log("購物車列表:",this.cart)})},changeCartNum(s,a){const u={product_id:s,qty:a};this.$http.put(`${l}/v2/api/${o}/cart/${s}`,{data:u}).then(()=>{this.getCartList()})},deleteCart(){this.$http.delete(`${l}/v2/api/${o}/carts`).then(s=>{this.getCartList(),alert(s.data.message)})},deleteCartItem(s){this.$http.delete(`${l}/v2/api/${o}/cart/${s}`).then(a=>{this.getCartList(),alert(a.data.message)})}},mounted(){this.getCartList()}},$=t("h2",null," 購物車 ",-1),f={class:"d-flex justify-content-end"},x={class:"table align-middle"},v=t("thead",null,[t("tr",null,[t("th"),t("th",{style:{"padding-left":"65px"}},"圖片"),t("th",{class:"text-center"},"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",{class:"text-center"},"價格")])],-1),y=["onClick"],V=["src"],L={class:"text-center"},E={class:"input-group input-group-sm"},k=["onUpdate:modelValue","onChange"],T={class:"input-group-text"},I={class:"text-center"},U=t("td",{colspan:"4",class:"text-end"},"總計 :",-1),w={class:"text-center"};function D(s,a,u,B,h,r){return d(),i(_,null,[$,t("div",f,[t("button",{type:"button",class:"btn btn-outline-danger me-4 mb-3",onClick:a[0]||(a[0]=e=>r.deleteCart())}," 清空購物車 ")]),t("table",x,[v,t("tbody",null,[(d(!0),i(_,null,g(h.cart.carts,e=>(d(),i("tr",{key:e.id},[t("td",null,[t("button",{type:"button",class:"btn-close border border-danger","aria-label":"Close",onClick:c=>r.deleteCartItem(e.id)},null,8,y)]),t("td",null,[t("img",{src:e.product.imageUrl,width:"150",alt:""},null,8,V)]),t("td",L,n(e.product.title),1),t("td",null,[t("div",E,[C(t("input",{type:"number",class:"form-control",min:"1","onUpdate:modelValue":c=>e.qty=c,onChange:c=>r.changeCartNum(e.id,e.qty)},null,40,k),[[b,e.qty,void 0,{number:!0}]]),t("span",T,n(e.product.unit),1)])]),t("td",I,n(e.final_total),1)]))),128))]),t("tfoot",null,[t("tr",null,[U,t("td",w,n(h.cart.final_total),1)])])])],64)}const q=p(m,[["render",D]]);export{q as default};
